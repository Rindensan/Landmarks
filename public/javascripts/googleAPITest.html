<!DOCTYPE html>
<html>
  <head>
    <style>
       #map {
        height: 400px;
        width: 100%;
       }
    </style>
  </head>
  <body>
      
    <h3>My Google Maps Demo</h3>
    <div id="map"></div>
      <button id="OpenCanada">Open Canada</button>
    <script>
        
        function initMap() {
            var marker ="";
            var map = new google.maps.Map(document.getElementById('map'), {
            zoom: 4,
            center: {lat: 51.4968, lng: -115.9281}
        })
            };
        
        function addInfoWindow(marker, message) {

            var infoWindow = new google.maps.InfoWindow({
                content: message
            });

            google.maps.event.addListener(marker, 'click', function () {
                infoWindow.open(map, marker);
            });
        }

            
        function loadDoc(){
            var xhttp = new XMLHttpRequest();
            xhttp.onreadystatechange = function(){
                if (this.readyState == 4 && this.status == 200) {
                    var jsonObj = JSON.parse(xhttp.responseText);
                    getLandmarks(jsonObj);
            }
        };
            xhttp.open("GET","https://maps.googleapis.com/maps/api/place/textsearch/json?query=point+of+interest+in+Vancouver&key=AIzaSyA5XukOn9Ji2Bl-BEFw9l-UJl2D4TaLDhM", true); 
            //For now, change it in here between "in" and "&key"
            xhttp.send();
    }
            function getLandmarks(json){
                var landmarks = [];
                var Results = json.results;
                for (i=0; i < Results.length; i++) {
                    landmarks.push({
                    name: Results[i].name,
                    address: Results[i].formatted_address,
                    latitude: Results[i].geometry.location.lat,
                    longitude: Results[i].geometry.location.lng,
                    photo: Results[i].photos
                });
                };
                console.log(landmarks);
                var locations = []
                for (var i =0; i < landmarks.length; i++){
                    locations.push({lat: landmarks[i].latitude, lng: landmarks[i].longitude})
                };
                console.log(locations)
           var map = new google.maps.Map(document.getElementById('map'), {
            zoom: 4,
            center: {lat: 51.4968, lng: -115.9281}
           });
            for (var i =0; i < locations.length; i++){
                marker = new google.maps.Marker({
                    position: locations[i],
                    animation: google.maps.Animation.DROP,
                    map: map
                });
                addInfoWindow(marker,"<p><b>" + landmarks[i].name + "</b></p><p>"+landmarks[i].address+"</p>")
            }
        };
        
        
        document.getElementById('OpenCanada').addEventListener('click', function() {
           loadDoc();
       });

    </script>
    <script async defer
    src="https://maps.googleapis.com/maps/api/js?key=AIzaSyBGT9DtN2cOFyQW8CY5GD7cHYbeWsBoox8&callback=initMap">
    </script>
  </body>
</html>